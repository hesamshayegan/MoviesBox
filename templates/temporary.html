{% set keep_trailing_newline = True %}
        <h1> {{ name }} </h1>
        <img src="{{ img_url }}" alt="image" width="200" height="300">

        <a href="/favorite_cast_new/{{ id }}"> Add to your favorite casts</a>
        <br>
        

        
        <p> {{ biography|replace('\n\n', '<br>')|safe }} </p>

        {% set max_length = 5 if movies|length > 5 else movies|length %}
        {% for movie in movies[:max_length] %}
            {{ movie.title }} <br>

            character: {{ movie.character }} <br>
            {{ movie.popularity }} <br> 

        {% endfor %}

        <a href="/favorite_casts">Go to your favorite casts</a>


        # @app.route('/suggestions')
# def show_suggestions():
#     """Show movie suggestions"""
    
#     # Retrieve the suggested_titles from the session
#     suggested_titles = session.get('suggested_titles')
    
#     existing_movies = db.session.query(SuggestedMovies).all()
#     for movie in existing_movies:
#         db.session.delete(movie)
#         db.session.commit()

#     for id, title in suggested_titles.items():
        
#         resp = get_movie(id)
     
#         poster_path = resp['images']['posters'][0]['file_path']
#         img_url = IMAGE_BASE_URL + poster_path
#         popularity = round(float(resp['popularity']), 2)

#         # Update suggested_titles with movies' image urls and popularity (%)     
#         suggested_titles[id] = (title, img_url, popularity)
        
#         overview = resp['overview']
#         runtime = resp['runtime']
#         genres = resp['genres']
#         casts = resp['credits']['cast']
#         crews = resp['credits']['crew']
         
#         director = {}
#         for crew in crews:
#             if crew['job'] == 'Director':
#                 director[crew['id']] = crew['name']

       
#         date = resp['release_date']
#         datetime_obj = datetime.datetime.strptime(date, "%Y-%m-%d")
#         # Change the format of the datetime object
#         release_date = datetime_obj.strftime("%m/%d/%Y")

#         videos = resp['videos']['results']
#         video_urls = []
#         for video in videos:
#          if video['type'] == 'Trailer' and video['site'] == 'YouTube': 
#             video_urls.append(video['key'])

#         if video_urls:
#             video_url = YOUTUBE_BASE_URL+video_urls[0]
            
#         # On the homepage I don't have any anchor tag (with movie_id) so I need to create a temporary db
#         new_movie = SuggestedMovies(id=id, title=title, img_url=img_url, overview=overview,
#                                     runtime=runtime, genres=genres, casts=casts, director=director, 
#                                     video_url=video_url, release_date =release_date)
#         db.session.add(new_movie)
#         db.session.commit()
         
#     return render_template('show.html', suggested_titles=suggested_titles)
        
##############################################################################
# Movie detail route
# @app.route('/movie_detail/<id>')
# def show_movie_detail(id):
#     """ Show movie detail"""
    
#     movie_id = SuggestedMovies.query.filter_by(id=id).first()
    

#     return render_template('movie_detail.html', movie_id=movie_id,
#                             IMAGE_BASE_URL=IMAGE_BASE_URL)


##############################################################################
# Cast detail route
# @app.route('/cast_detail/<id>')
# def show_cast_detail(id):
#     """ Show cast detail """
    
#     resp = get_cast_detail(id)
#     id = resp['id']
#     name =  resp['name']
#     img_url = IMAGE_BASE_URL + resp['images']['profiles'][0]['file_path']
#     biography = resp['biography']
#     movies = resp['movie_credits']['cast']
#     movies.sort(key=lambda x: x['popularity'], reverse=True) 
    
#     return render_template('cast_detail.html', id=id, name=name, img_url=img_url,
#                            biography=biography, movies=movies)



<img src="{{ cast.img_url }}" alt="image" width="200" height="300">
                <a href="/cast_detail/{{ id }}"> {{ cast.name }} </a> <br>
                <a href="/favorite_casts/{{ id }}/delete"> Delete cast </a>